include "persons/defaults.conf"
include "org-structure/defaults.conf"


annette.ignition {

  stages = [
    "service-catalog",
//    "persons",
//    "org-structure",
//    "authorization"
  ]

  on-error = ignore # ignore - ignore errors and continue processing stages, stop - complete current stage and stop processing

  principal = person~P0001

  service-catalog {
    entities = [
      "category",
      "scope",
      "scope-principal",
      "group",
      "service",
      "service-principal"
    ]

    on-error = ignore

    category {
      data = [
        "service-catalog/category.yaml",
      ]
      mode = upsert # insert/upsert mode for entities
      parallelism = 1 # parallelism for entities
      on-error = ignore # ignore/stop
    }
    scope {
      data = [
        "service-catalog/scope.yaml",
      ]
    }
    scope-principal {
      data = [
        "service-catalog/scope-principal.yaml",
      ]
    }
    group {
      data = [
        "service-catalog/group.yaml",
      ]
      parallelism = 4 # parallelism for entities
    }
    service {
      data = [
        "service-catalog/service.yaml",
      ]
      parallelism = 4 # parallelism for entities
    }
    service-principal {
      data = [
        "service-catalog/service-principal.yaml",
      ]
      parallelism = 4 # parallelism for entities
    }
  }
}


